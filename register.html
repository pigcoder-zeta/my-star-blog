<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ å…¥æˆ‘ä»¬ - æç®€æ³¨å†Œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- 1. å…¨å±€ç¯å¢ƒè®¾å®š --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }

 body {
    font-family: 'Noto Sans SC', sans-serif;
    
    /* --- ä¿®å¤çš„æ ¸å¿ƒåœ¨è¿™é‡Œ --- */
    
    /* 1. è®¾ç½®ä¸€ä¸ªæ·±è‰²åº•è‰²ä½œä¸ºä¿é™©ï¼ˆé˜²æ­¢å›¾ç‰‡æŒ‚äº†å˜ç™½å±ï¼‰ */
    background-color: #333; 
    
    /* 2. æˆ‘ä»¬å¯ä»¥æš‚æ—¶ç”¨ä¸€ä¸ªâ€œæ¸å˜è‰²â€ä»£æ›¿å›¾ç‰‡ï¼Œæ—¢å¥½çœ‹åˆä¸éœ€è¦è”ç½‘åŠ è½½ */
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    
    /* å¦‚æœä½ ä¸€å®šè¦ç”¨å›¾ç‰‡ï¼Œè¯·ç¡®ä¿ç½‘ç»œèƒ½è®¿é—®è¿™ä¸ªé“¾æ¥ï¼Œæˆ–è€…æ¢ä¸€ä¸ªé“¾æ¥ */
    /* background: url('https://images.unsplash.com/photo-1542393545-10f5cde2c81d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80') no-repeat center center fixed; */
    
    background-size: cover;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}
        /* --- 2. æ¯›ç»ç’ƒå¡ç‰‡ --- */
        .glass-container {
            width: 380px;
            padding: 50px 40px;
            background: rgba(255, 255, 255, 0.2); 
            backdrop-filter: blur(10px); 
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.2);
            color: white;
        }

        h2 {
            text-align: center;
            margin-bottom: 30px;
            font-weight: 700;
            letter-spacing: 2px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        /* --- 3. è¾“å…¥æ¡†ç»„ (åŒ…å«å›¾æ ‡) --- */
        .input-group {
            position: relative; /* ã€å…³é”®ã€‘ä½œä¸ºç»å¯¹å®šä½å›¾æ ‡çš„å‚è€ƒç³» */
            margin-bottom: 30px;
        }

        /* ã€æ–°å¢æ­¥éª¤ 2ã€‘å›¾æ ‡æ ·å¼ */
        .input-group i {
            position: absolute; /* ç»å¯¹å®šä½ï¼šè„±ç¦»æ–‡æ¡£æµï¼Œè‡ªç”±ç§»åŠ¨ */
            left: 0;            /* é å·¦å¯¹é½ */
            top: 12px;          /* è·ç¦»é¡¶éƒ¨è·ç¦»ï¼ˆæ ¹æ®è¾“å…¥æ¡†é«˜åº¦å¾®è°ƒï¼‰ */
            color: rgba(255, 255, 255, 0.8); /* å›¾æ ‡é¢œè‰² */
            font-size: 18px;
            transition: 0.3s;
        }

        .input-group input {
            width: 100%;
            padding: 10px 0;
            
            /* ã€æ–°å¢æ­¥éª¤ 3ã€‘å·¦å†…è¾¹è· */
            /* å› ä¸ºå·¦è¾¹æ”¾äº†å›¾æ ‡ï¼Œæ–‡å­—å¦‚æœä»æœ€å·¦è¾¹å¼€å§‹ä¼šå‹ä½å›¾æ ‡ */
            /* æ‰€ä»¥è¦ç»™ input è®¾ç½® padding-leftï¼ŒæŠŠæ–‡å­—å¾€å³æ¨ */
            padding-left: 35px; 
            
            font-size: 16px;
            color: #fff;
            background: transparent;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.5);
            outline: none;
            transition: 0.3s;
        }

        .input-group input::placeholder { color: rgba(255, 255, 255, 0.7); }

        /* äº¤äº’å¾®è°ƒï¼šå½“è¾“å…¥æ¡†èšç„¦æ—¶ï¼Œå›¾æ ‡å’Œåº•è¾¹éƒ½å˜äº® */
        .input-group input:focus { border-bottom: 2px solid #fff; }
        .input-group input:focus ~ i { color: #fff; transform: scale(1.1); } 
        /* (~ i è¡¨ç¤ºé€‰æ‹© input åé¢çš„é‚£ä¸ªå…„å¼Ÿ i å…ƒç´ ) */

        /* --- 4. æŒ‰é’®ç¾åŒ– --- */
        button {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            color: #007bff;
            background: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        button:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
        button:active { transform: scale(0.95); }

        /* --- 5. è¾…åŠ©ä¿¡æ¯ --- */
        .footer-text { text-align: center; margin-top: 20px; font-size: 13px; }
        .footer-text a { color: rgba(255, 255, 255, 0.8); text-decoration: none; font-weight: bold; }
        .footer-text a:hover { text-decoration: underline; color: #fff; }
        .message { text-align: center; margin-top: 15px; font-size: 14px; min-height: 20px; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
        .error { color: #ffcccc; }
        .success { color: #ccffcc; }
    </style>
</head>
<body>

    <div class="glass-container">
        <h2>åˆ›å»ºè´¦æˆ·</h2>
        
        <form id="registerForm">
            <div class="input-group">
                <i class="fas fa-user"></i>
                <input type="text" id="username" placeholder="ç”¨æˆ·å" required autocomplete="off">
            </div>
            
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="password" placeholder="å¯†ç " required>
            </div>
            
            <button type="submit">ç«‹å³æ³¨å†Œ</button>
        </form>

        <p id="msg" class="message"></p>

        <div class="footer-text">
            <p>å·²æœ‰è´¦å·ï¼Ÿ <a href="nav.html">è¿”å›é¦–é¡µ</a></p>
        </div>
    </div>

<script>
        const form = document.getElementById('registerForm');
        const msg = document.getElementById('msg');

        form.addEventListener('submit', function(e) {
            e.preventDefault(); // é˜»æ­¢è¡¨å•é»˜è®¤åˆ·æ–°

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // ç®€å•çš„é•¿åº¦éªŒè¯
            if(username.length < 3) {
                msg.textContent = "ç”¨æˆ·åå¤ªçŸ­å•¦ï¼";
                msg.className = "message error";
                return;
            }

            // æç¤ºç”¨æˆ·æ­£åœ¨è¯·æ±‚
            msg.textContent = "æ­£åœ¨è¿æ¥æœåŠ¡å™¨...";
            msg.className = "message";

            // --- å‘é€ç½‘ç»œè¯·æ±‚ (Fetch) ---
            fetch('http://localhost:3000/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username: username, password: password })
            })
            .then(response => response.json()) // æŠŠåç«¯è¿”å›çš„æ•°æ®è½¬æˆ JSON
            .then(data => {
                if (data.success) {
                    // æ³¨å†ŒæˆåŠŸ
                    msg.textContent = "ğŸ‰ " + data.message;
                    msg.className = "message success";
                    // 1.5ç§’åè·³è½¬
                    setTimeout(() => { window.location.href = 'nav.html'; }, 1500);
                } else {
                    // æ³¨å†Œå¤±è´¥ï¼ˆæ¯”å¦‚ç”¨æˆ·åé‡å¤ï¼‰
                    msg.textContent = "âŒ " + data.message;
                    msg.className = "message error";
                }
            })
            .catch(error => {
                console.error('Error:', error);
                msg.textContent = "è¿æ¥å¤±è´¥ï¼è¯·ç¡®è®¤åç«¯æœåŠ¡å™¨(node server.js)å·²å¯åŠ¨";
                msg.className = "message error";
            });
        });
    </script>
</body>
</html>